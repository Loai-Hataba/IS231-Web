{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book List</title>
    <link rel="stylesheet" href="{% static 'css/booklist.css' %}" />
    <link rel="stylesheet" href="{% static 'css/cart-icon.css' %}" />
    <!--<link rel="stylesheet" href="{% static 'utils/navStyles.css' %}" />-->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <a href="{% url 'index' %}" class="back-button">‚Üê</a>
      <div class="search-container">
        <input
          type="text"
          class="search-bar"
          placeholder="Search for books..."
        />
      </div>
      <nav>
        <ul>
          <li class="navigation button">
            <a href="{% url 'cart' %}" class="cart-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
              </svg>
              <span class="cart-badge">0</span>
            </a>
          </li>
          <li class="navigation button">
            <div class="sign-up">
              <a href="{% url 'user_profile' %}">User Profile</a>
            </div>
          </li>
        </ul>
      </nav>
    </header>

    <div class="filter-bar">
      <button class="filter-button">All</button>
      <button class="filter-button">Fiction</button>
      <button class="filter-button">Non-Fiction</button>
      <button class="filter-button">Science</button>
      <button class="filter-button">History</button>
    </div>

    <div class="books-container">
      <div class="book-row">
      </div>
        
      <div class="book-row">
      </div>

      <div class="book-row">
      </div>

      <div class="book-row">
      </div>

      <div class="show-more-container">
        <button class="show-more-button">Show More Books</button>
      </div>
    </div>
    <footer class="footer">
      <div>
        <a href="{% url 'help' %}">Help</a>
        <a href="{% url 'privacyPolicy' %}">Privacy</a>
        <a href="{% url 'termsOfUse' %}">Terms</a>
        <a href="{% url 'contactUs' %}">Contact Us</a>
      </div>
    </footer>

    <script src="../../static/javascript/list.js"></script>
    <script>
      // Function to update cart count badge
      function updateCartCount(count) {
          const cartBadge = document.querySelector('.cart-badge');
          if (cartBadge) {
              cartBadge.textContent = count;
              cartBadge.style.display = count > 0 ? 'flex' : 'none';
          }
      }
      
      // Fetch cart count from server
      function fetchCartCount() {
          fetch('/cart/count/')
              .then(response => response.json())
              .then(data => {
                  if (data.success) {
                      updateCartCount(data.cart_count);
                  }
              })
              .catch(error => console.error('Error fetching cart count:', error));
      }
      
      // Initialize cart count when page loads
      document.addEventListener('DOMContentLoaded', function() {
          fetchCartCount();
      });
    </script>

  </body>
</html>
